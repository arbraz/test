#############################################################################
# Makefile:
#    This is a makefile for maintaining the
#    '/home/user/trick/07.23.1/trick_sims/SIM_bio/S_defines'
#    simulation directory. This make file was automatically generated by CP
#
#############################################################################
# Creation:
#    Author: Trick Configuration Processor - CP Version 07.23.1-1
#    Date:   Sun Sep 29 21:26:09 2013
#
#############################################################################
#
#  To get a list of make options, type 'make help'
#
#############################################################################

LEX   = /usr/bin/flex
PERL  = /usr/bin/perl
RM    = rm

ifeq ($(TRICK_HOST_TYPE), IRIX_6.x)
     YACC  = /usr/freeware/bin/bison
else
     YACC  = /usr/bin/bison
endif

#
# Make information
#
MAKEFILE    = Makefile

DEPFILE = /home/user/trick/07.23.1/trick_sims/SIM_bio/S_defines/Makefile_deps
DEPTEMPFILE = /home/user/trick/07.23.1/trick_sims/SIM_bio/S_defines/Makefile_temp_depends

export TRICK_HOST_CPU := $(shell gte TRICK_HOST_CPU)
export TRICK_HOST_TYPE := $(shell gte TRICK_HOST_TYPE)

TRICK_LIB  := ${TRICK_HOME}/lib_${TRICK_HOST_CPU}
TRICK_LIBS := ${TRICK_LIB}/libtrick.a

ifndef TRICK_CC
 TRICK_CC = cc
endif

ifndef TRICK_CPPC
 TRICK_CPPC = c++
endif

TRICK_CFLAGS += -DTRICK_VER=07 -DTRICK_MINOR=23 -I${TRICK_HOME}/trick_source -I../include

LIB_SIM_OBJS = $(LIB_DIR)/lib_sim_objs.a

ifeq ($(TRICK_FORCE_32BIT), 1)
 TRICK_CFLAGS += -m32
endif

ifeq ($(TRICK_HOST_TYPE), Linux)
 MAKEDEP_CPP_INC = -Iinclude -I/usr/include/g++-3
 TRICK_EXEC_LINK_LIBS += -lm -lrt
 CTAGS := $(shell if test -e /usr/bin/ctags ; then echo /usr/bin/ctags ; fi)
endif

ifeq ($(TRICK_HOST_TYPE), QNX)
 MAKEDEP_CPP_INC = -Iinclude
 TRICK_EXEC_LINK_LIBS += -lm -lsocket
 CTAGS =
endif

ifeq ($(TRICK_HOST_TYPE), LynxOS)
 TRICK_CFLAGS += -mthreads
 CTAGS = /bin/ctags
endif

ifeq ($(TRICK_HOST_TYPE), Darwin)
 MAKEDEP_CPP_INC = -Iinclude -I/usr/include/gcc/darwin/default/g++-v3 \
  -I/usr/include/gcc/darwin/default3.1/g++-v3/ppc-darwin \
  -I/usr/include/gcc/darwin/default/g++-v3/backward \
  -I/usr/include/gcc/darwin/default
 TRICK_CFLAGS += -I/usr/X11R6/include -I/usr/local/include
 TRICK_EXEC_LINK_LIBS += -lm -lpthread
 TRICK_RANLIB = /usr/bin/ranlib
 CTAGS := $(shell if test -e /sw/bin/ctags ; then echo /sw/bin/ctags ; fi)
endif

ifeq ($(TRICK_HOST_TYPE), SunOS_5.6_plus)
 MAKEDEP_CPP_INC = -Iinclude -I/opt/sfw/include/g++-3 \
  -I/opt/sfw/sparc-sun-solaris2.8/include \
  -I/opt/sfw/lib/gcc-lib/sparc-sun-solaris2.8/2.95.3/include
 TRICK_EXEC_LINK_LIBS += -lm -lsocket -lnsl -lpthread -lrt
endif

ifeq ($(TRICK_HOST_TYPE), IRIX_6.x)
 MAKEDEP_CPP_INC = -Iinclude -I/usr/include/CC
 TRICK_EXEC_LINK_LIBS += -lm -lfpe -lpthread -lgen
 CTAGS = /usr/bin/ctags
endif

ifeq ($(MAKECMDGOALS), depend)
 .NOTPARALLEL:
endif

ifdef TRICK_SHARED_LIBS
TRICK_LIBS_LINK = -L${TRICK_LIB} -ltrick
else
TRICK_LIBS_LINK = ${TRICK_LIBS}
endif

MASTER  = ${TRICK_LIB}/master.o
MASTER_RIF  = ${TRICK_LIB}/master_rif.o

S_MAIN  = S_main_${TRICK_HOST_CPU}.exe
S_RIF  = S_rif_${TRICK_HOST_CPU}.exe
LIB_DIR = lib_${TRICK_HOST_CPU}

# These lines are here to provide a default values
# They can be overridden in S_overrides.mk
# UB = User Begin rules
# UM = User Middle rules
# UE = User End rules

UB =
UM =
UE =

# OK, silly me, I named the linker "LN" instead if "LD",
# but everyone is using it now.  Doh!
ifndef TRICK_LN
TRICK_LN = ${TRICK_CC}
endif

TRICK_ULIBS = ${TRICK_USER_LINK_LIBS}

#MODEL_DIR_bio_organs = /home/user/trick/07.23.1/trick_models/bio/organs


MODEL_C_SRC_bio_organs = \
	/home/user/trick/07.23.1/trick_models/bio/organs/src/concentration_deriv.c \
	/home/user/trick/07.23.1/trick_models/bio/organs/src/organ_init.c \
	/home/user/trick/07.23.1/trick_models/bio/organs/src/organ_integ.c

MODEL_C_OBJ_bio_organs = \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/concentration_deriv.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_init.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_integ.o

MODEL_IO_SRC_bio_organs = \
	/home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organ_params.c \
	/home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organs.c

MODEL_IO_OBJ_bio_organs = \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o

MODEL_HEADERS_bio_organs = \
	/home/user/trick/07.23.1/trick_models/bio/organs/include/organ_params.h \
	/home/user/trick/07.23.1/trick_models/bio/organs/include/organs.h

MODEL_ALL_SRC = \
	$(MODEL_C_SRC_bio_organs) \
	$(MODEL_HEADERS_bio_organs)


OBJECTS = \
	$(LIB_DIR)/o0.o \
	$(LIB_DIR)/o1.o \
	$(LIB_DIR)/o2.o

IO_OBJECTS = \
	$(LIB_DIR)/i0.o \
	$(LIB_DIR)/i1.o

MODEL_OBJ_DIRS = \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}

BUILD_USER_LIBS = 

READ_ONLY_LIBS = 

all: S_main

S_main : Makefile ${UB} objects $(LIB_DIR) ${UM} $(S_MAIN) S_sie.resource ${UE}
	@ echo ""
	@ echo "[32m=== Simulation make complete ===[00m"

tags : S_library_list
ifneq ($(CTAGS),)
	@ $(PERL) -pe 's/\s+1$$//' S_library_list | $(CTAGS) -L -
else
	@ touch $@
endif

ifneq ($(MAKECMDGOALS),spotless)
Makefile: S_define
	@ echo Error: "S_define has later date than Makefile."
	@ echo Error: "It is mandatory to CP after modifying the S_define."
	@ exit -1
endif

S_rif : $(MODEL_OBJ_DIRS) $(MODEL_IO_SRC) $(MODEL_IO_OBJ) $(LIB_DIR) $(S_RIF)
	@ echo ""
	@ echo "[32m=== Simulation make complete ===[00m"

objects : $(MODEL_OBJ_DIRS) $(MODEL_IO_SRC) model_objects build_user_lib

build_user_lib : $(BUILD_USER_OBJ_DIRS) $(BUILD_USER_LIBS) $(BUILD_USER_LIB_CATALOG_DIRS) $(BUILD_USER_LIBS_XML)


$(S_MAIN): $(BUILD_USER_LIBS) ${MASTER} ${TRICK_LIBS} $(LIB_SIM_OBJS)
	$(TRICK_LN) $(TRICK_CFLAGS) -o S_main_${TRICK_HOST_CPU}.exe \
		${MASTER}\
		${TRICK_LIBS}\
		$(LIB_SIM_OBJS)\
		${BUILD_USER_LIBS} ${TRICK_ULIBS} ${READ_ONLY_LIBS}\
		${BUILD_USER_LIBS} ${TRICK_ULIBS} ${READ_ONLY_LIBS}\
		${TRICK_LIBS_LINK} ${TRICK_EXEC_LINK_LIBS}


$(S_RIF): $(IO_OBJECTS) $(LIB_DIR)/S_rif.o ${MASTER_RIF} ${TRICK_LIBS}
	$(TRICK_LN) $(TRICK_CFLAGS) -o S_rif_${TRICK_HOST_CPU}.exe $(LIB_DIR)/S_rif.o \
		${MASTER_RIF} \
		${IO_OBJECTS}\
		${BUILD_USER_LIBS} ${TRICK_ULIBS} ${READ_ONLY_LIBS}\
		${BUILD_USER_LIBS} ${TRICK_ULIBS} ${READ_ONLY_LIBS}\
		${TRICK_LIBS_LINK} ${TRICK_EXEC_LINK_LIBS}

$(LIB_DIR) :
	@ mkdir -p $@

$(LIB_DIR)/S_source.o: S_source.c
	$(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c S_source.c -o $(LIB_DIR)/S_source.o

$(LIB_DIR)/S_rif.o: S_source.c
	$(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -DRIF -c S_source.c -o $(LIB_DIR)/S_rif.o

$(LIB_DIR)/S_checksums.o: S_checksums.c
	$(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c S_checksums.c -o $(LIB_DIR)/S_checksums.o

S_source.c S_default.dat: S_define
	$(PERL) ${TRICK_HOME}/bin/CP -s -d

S_Source.cpp: S_source.c
	@ln -s S_source.c S_Source.cpp

S_checksums.c: $(MODEL_ALL_SRC) S_define Makefile
	@ echo "[36mVerifying sim checksums...[00m"
	@ $(PERL) ${TRICK_HOME}/bin/sim_checksums

S_sie.resource: $(S_MAIN)
	@ echo "Generating S_sie.resource..."
	./$(S_MAIN) sie

help:
	@ echo -e "\n\
Simulation make options:\n\
    make                 - Makes everything: S_main, S_sie.resource,\n\
\t\t\tand S_default.dat\n\
    make S_sie.resource  - Rebuilds the S_sie.resource file.\n\
    make S_source.c      - Rebuilds the S_source.c file.\n\
    make clean           - Removes all auto-generated files in\n\
\t\t\tsimulation directory\n\
    make clean_cat       - Removes all catalog references to all files listed\n\
\t\t\tin S_library_list\n\
    make clean_model_io_src - Removes all io_src code in the model directories\n\
    make clean_model_io_obj - Removes all io_obj code in the model directories\n\
    make clean_obj       - Removes all object code in the model directories\n\
    make depend          - Performs make_depend for the entire simulation\n\
    make real_clean      - Does a make clean and clean_obj and removes\n\
\t\t\tall io_src files, flex/bison files and \n\
\t\t\tTrick built libraries \n\
    make spotless        - Does everthing in real_clean and\n\
\t\t\tremoves all S_mains and lib directories and\n\
\t\t\tperforms catalog -i to clean the catalog\n"

clean:
	@ rm -rf $(LIB_DIR) Default_data
	@ rm -rf lib
	@ rm -f S_default.dat S_document.xml S_main_${TRICK_HOST_CPU}.exe
	@ rm -f S_rif_${TRICK_HOST_CPU}.exe S_sie.resource S_source.c S_Source.cpp S_structures
	@ rm -f S_checksums.c $(DEPFILE) sim_info .auto_checksums
	@ rm -f DP_Product/DP_rt_frame DP_Product/DP_rt_itimer
	@ rm -f DP_Product/DP_rt_jobs DP_Product/DP_rt_timeline DP_Product/DP_mem_stats
	@ rm -f CP_out
	@ echo "Removed S_<files>"

real_clean: clean_cat clean clean_obj clean_model_io_src clean_lex_yacc_src
	@ rm -f Makefile Makefile.bak S_library_list

spotless: real_clean
	@ $(PERL) ${TRICK_HOME}/bin/catalog -initialize
	@ rm -rf lib_* S_main* tags
	@ echo "Removed all S_mains"
	@ cd /home/user/trick/07.23.1/trick_models/bio/organs ; rm -rf catalog xml io_src object_* 
	@ echo "Removed all catalog, xml, io_src, and object_* dirs"

clean_obj: clean_model_c_obj clean_model_cpp_obj clean_model_io_obj clean_lex_yacc_obj

clean_cat:
	@ $(PERL) ${TRICK_HOME}/bin/catalog -initialize


clean_model_c_obj:
	@ rm -f $(MODEL_C_OBJ_bio_organs)
	@ echo "Model c_obj files have been removed"

clean_model_cpp_obj:
	@ echo "Model cpp_obj files have been removed"

clean_model_io_src:
	@ rm -f $(MODEL_IO_SRC_bio_organs)
	@ echo "Model io_src files have been removed"

clean_model_io_obj:
	@ rm -f $(MODEL_IO_OBJ_bio_organs)
	@ echo "Model io_obj files have been removed"

clean_lex_yacc_obj:
	@ echo "Model lex/yacc obj files have been removed"

clean_lex_yacc_src:
	@ echo "Model lex/yacc src files have been removed"

depend: depend_title \
	depend_1\
	depend_s_source

	@ $(PERL) ${TRICK_HOME}/bin/depend_cp $(DEPTEMPFILE) > $(DEPFILE)
	@ $(RM) $(DEPTEMPFILE)
	@ echo ""
	@ echo "[32mAppended dependencies to $(MAKEFILE)[00m"

depend_title:
	@ echo "[36mAdding makedepend dependencies [1 dir(s)][00m"


depend_1 : depend_title
	@ echo "   1. Adding dependencies for src files in /home/user/trick/07.23.1/trick_models/bio/organs"
	@ echo "" >> $(DEPTEMPFILE)
	@ echo "# Dependencies for src files in /home/user/trick/07.23.1/trick_models/bio/organs/src/" >> $(DEPTEMPFILE)

	-@ cd /home/user/trick/07.23.1/trick_models/bio/organs/src/ ; $(TRICK_CC) -MM $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) $(MAKEDEP_CPP_INC) $(MODEL_C_SRC_bio_organs) $(MODEL_CPP_SRC_bio_organs) >> $(DEPTEMPFILE)

depend_s_source:
	@ echo "   2. Adding dependencies for S_source.c"
	@ echo "" >> $(DEPTEMPFILE)
	@ echo "# Dependencies for S_source.c" >> $(DEPTEMPFILE)
	@ $(TRICK_CC) -MM $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) $(MAKEDEP_CPP_INC) S_source.c >> $(DEPTEMPFILE)

#LIBS

$(LIB_DIR)/lib_sim_objs.a : $(OBJECTS) $(IO_OBJECTS) $(LIB_DIR)/S_source.o $(LIB_DIR)/S_checksums.o
	@ rm -rf $@
	ar crs $@ $(LIB_DIR)/*.o
	@ if [ "${TRICK_RANLIB}" != "" ] ; then \
	     echo ${TRICK_RANLIB} $(LIB_DIR)/lib_sim_objs.a ; \
	     ${TRICK_RANLIB} $(LIB_DIR)/lib_sim_objs.a ; \
	  fi
$(LIB_DIR)/o0.o : /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/concentration_deriv.o
	ln -f -s /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/concentration_deriv.o $(LIB_DIR)/o0.o
$(LIB_DIR)/o1.o : /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_init.o
	ln -f -s /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_init.o $(LIB_DIR)/o1.o
$(LIB_DIR)/o2.o : /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_integ.o
	ln -f -s /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_integ.o $(LIB_DIR)/o2.o
$(LIB_DIR)/i0.o : /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o
	ln -f -s /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o $(LIB_DIR)/i0.o
$(LIB_DIR)/i1.o : /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o
	ln -f -s /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o $(LIB_DIR)/i1.o

#MODEL_OBJ_DIRS

/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU} :
	@ mkdir -p $@

#MODEL_CATALOG_DIRS

/home/user/trick/07.23.1/trick_models/bio/organs/catalog :
	@ mkdir -p $@
lib/i0.o: /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o
	ln -f -s $? $@
lib/i1.o: /home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o
	ln -f -s $? $@


#ICG_DEPEND_FILES

# Depends for /home/user/trick/07.23.1/trick_models/bio/organs/include/organs.h

ICG_DEPENDS_0000 = \
	/home/user/trick/07.23.1/trick_models/bio/organs/include/organ_params.h \
	/home/user/trick/07.23.1/trick_models/bio/organs/include/organs.h

/home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organ_params.c \
/home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organs.c:: $(ICG_DEPENDS_0000)
	$(PERL) ${TRICK_HOME}/bin/ICG /home/user/trick/07.23.1/trick_models/bio/organs/include/organs.h


model_objects : \
	model_obj_bio_organs

model_obj_bio_organs : model_c_obj_bio_organs model_h_obj_bio_organs

model_c_obj_bio_organs : \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/concentration_deriv.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_init.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_integ.o

model_h_obj_bio_organs : \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o \
	/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o

#MODEL_C_OBJ_bio_organs

/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/concentration_deriv.o : /home/user/trick/07.23.1/trick_models/bio/organs/src/concentration_deriv.c
	cd /home/user/trick/07.23.1/trick_models/bio/organs/src/ ; $(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c ${@F:.o=.c} -o $@
/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_init.o : /home/user/trick/07.23.1/trick_models/bio/organs/src/organ_init.c
	cd /home/user/trick/07.23.1/trick_models/bio/organs/src/ ; $(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c ${@F:.o=.c} -o $@
/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/organ_integ.o : /home/user/trick/07.23.1/trick_models/bio/organs/src/organ_integ.c
	cd /home/user/trick/07.23.1/trick_models/bio/organs/src/ ; $(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c ${@F:.o=.c} -o $@


#MODEL_CPP_OBJ_bio_organs



#MODEL_LEX_YACC_OBJ_bio_organs



#MODEL_IO_OBJ_bio_organs

/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organ_params.o : /home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organ_params.c
	cd /home/user/trick/07.23.1/trick_models/bio/organs ; $(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c io_src/${@F:.o=.c} -o $@

/home/user/trick/07.23.1/trick_models/bio/organs/object_${TRICK_HOST_CPU}/io_organs.o : /home/user/trick/07.23.1/trick_models/bio/organs/io_src/io_organs.c
	cd /home/user/trick/07.23.1/trick_models/bio/organs ; $(TRICK_CC) $(CPP_PRE_DEFS) $(TRICK_CFLAGS) $(CPP_POST_DEFS) -c io_src/${@F:.o=.c} -o $@


-include S_overrides.mk

-include Makefile_deps
